# 01 ğŸ“š ìƒí™©ì— ë”°ë¼ ë‹¬ë¼ì§€ëŠ” this

<br>

## ğŸ“ ì½ì€ ë‚´ìš©

### this
#### ì „ì—­ ê³µê°„ì—ì„œì˜ this
- ì „ì—­ ê³µê°„ì—ì„œ thisëŠ” ì „ì—­ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.

```js
// ë¸Œë¼ìš°ì € í™˜ê²½
console.log(this) // window { alert: f(), atob: f(), blur: f(), btoa: f(), ...}
console.log(window) // window { alert: f(), atob: f(), blur: f(), btoa: f(), ...}

// node.jsí™˜ê²½
console.log(this) // global { process: {title: 'node', version: ...}
console.log(global) // global { process: {title: 'node', version: ...}
```

### ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ëª¨ë“  ë³€ìˆ˜ëŠ” ì‚¬ì‹¤ íŠ¹ì • ê°ì²´ì˜ í”„ë¡œí¼í‹°

```js
var a = 1;
console.log(a); // 1
console.log(window.a); // 1
console.log(this.a); // 1
```

- ì „ì—­ë³€ìˆ˜ aì— 1ì„ í• ë‹¹í–ˆë‹¤.
- ì „ì—­ë³€ìˆ˜ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ìœ¼ë¡œ ì¸í•´ ì „ì—­ê°ì²´ì˜ í”„ë¡œí¼í‹°ë¡œ í• ë‹¹ëœë‹¤.
- ì „ì—­ ê³µê°„ì—ì„œ thisëŠ” ì „ì—­ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
- ë”°ë¼ì„œ `this.a`ëŠ” 1ì´ë‹¤.
- `a`ë¥¼ ì…ë ¥í•´ë„ 1ì´ ë‚˜ì˜¤ëŠ” ì´ìœ ëŠ” ìŠ¤ì½”í”„ ì²´ì¸ì—ì„œ aë¥¼ ê²€ìƒ‰í•˜ë‹¤ê°€ ê°€ì¥ ë§ˆì§€ë§‰ì— ë„ë‹¬í•˜ëŠ” ì „ì—­ ìŠ¤ì½”í”„ì˜ aë¥¼ ë°œê²¬í•˜ì—¬ ë°˜í™˜í–ˆê¸° ë•Œë¬¸

### ë‹¤ë¥¸ í™˜ê²½ì—ì„œì˜ ì „ì—­ ë³€ìˆ˜ì™€ this
Browserì—ì„œëŠ” varë¡œ ì„ ì–¸í•  ë•Œ `window`ë¼ëŠ” ì „ì—­ ê°ì²´ì— í”„ë¡œí¼í‹°ë¡œ ë“±ë¡ë˜ëŠ” ê²ƒì„ í™•ì¸í–ˆë‹¤. thisë˜í•œ `window`ë¼ëŠ” ê²ƒì„ í™•ì¸í–ˆë‹¤. ë‹¤ë¥¸ í™˜ê²½ì—ì„œëŠ” ì–´ë–¨ê¹Œ?

#### Node.js (REPL) í™˜ê²½

```js
var b = 20;
console.log(global.b); // 20
console.log(globalThis.b); // 20
console.log(this)         // global
```

- global, globalThis ì ‘ê·¼ ê°€ëŠ¥
- thisë˜í•œ globalë¡œ ë°”ì¸ë”© ë¨
> global, globalThisì˜ ì°¨ì´?
> `global`: Node.js í™˜ê²½ì—ì„œë§Œ ì¡´ì¬í•˜ëŠ” ì „ì—­ ê°ì²´ë¥¼ ì˜ë¯¸í•˜ëŠ” ì „ì—­ ë³€ìˆ˜
> `gloablThis`: ES2020(ES11)ì—ì„œ ë„ì…ëœ ì „ì—­ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ëŠ” í‘œì¤€ ë°©ì‹ìœ¼ë¡œì¨, ë¸Œë¼ìš°ì €, Node.js, Web Worker ë“± ëª¨ë“  í™˜ê²½ì—ì„œ ì°¸ì¡° ê°€ëŠ¥

#### Node.js (íŒŒì¼ ì‹¤í–‰) í™˜ê²½

```js
var c = 30;
console.log(global.c); // undefined
console.log(globalThis.c); // undefined
console.log(this)  // {} ë¹ˆ ê°ì²´
```

- Node.jsëŠ” íŒŒì¼ë‹¨ìœ„ë¡œ ì‹¤í–‰ë  ë•Œ varë¥¼ ëª¨ë“ˆ ìŠ¤ì½”í”„(module scope)ì—ì„œ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸.
- thisê°€ ê¸€ë¡œë²Œ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ì§€ ì•Šë„ë¡ ì„¤ê³„ ë¨.
> Module scopeë€?
> ES6 ëª¨ë“ˆ(import/export) ë˜ëŠ” Node.jsì˜ require() ë°©ì‹ì—ì„œ ê°œë³„ ëª¨ë“ˆ ë‚´ì—ì„œë§Œ ìœ íš¨í•œ ìŠ¤ì½”í”„ë¥¼ ì˜ë¯¸.

### ES6ëª¨ë“ˆ (mjs)

```js
// module.js (ES6 ëª¨ë“ˆ)
var a = 20;
console.log(this);  // undefined
console.log(global.a) // undefined
console.log(window.a) // undefined
```

- ëª¨ë“ˆ ë‚´ì—ì„œ ì„ ì–¸ëœ ë³€ìˆ˜ë“¤ì€ ì „ì—­ ê°ì²´ì— ë“±ë¡ë˜ì§€ ì•Šìœ¼ë©°, ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ê³ , ì˜¤ì§ í•´ë‹¹ ëª¨ë“ˆ ë‚´ì—ì„œë§Œ ìœ íš¨í•˜ë‹¤.


### ë©”ì„œë“œë¡œì„œ í˜¸ì¶œí•  ë•Œì˜ this
- ë©”ì„œë“œë¡œ thisëŠ” í˜¸ì¶œí•œ ê°ì²´ë¥¼ ì°¸ì¡°í•œë‹¤.

```js
var obj = {
  method: function(x) { console.log(this, x); }
};
obj.method(1);  // { method: f } 1
obj['method'](2)  // { method: f } 2
```

### ë©”ì„œë“œ ë‚´ë¶€ì—ì„œì˜ this
- thisì—ëŠ” í˜¸ì¶œí•œ ì£¼ì œì— ëŒ€í•œ ì •ë³´ê°€ ë‹´ê¸´ë‹¤.
- ì  í‘œê¸°ë²•ì˜ ê²½ìš° ë§ˆì§€ë§‰ ì  ì•ì— ëª…ì‹œëœ ê°ì²´ê°€ ê³§ thisê°€ ëœë‹¤.

```js
var obj = {
  methodA: function() { console.log(this); },
  inner: {
    methodB: function(){ console.log(this); }
  }
}

obj.inner.methodB();  // { methodB: f }
```

### í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œí•  ë•Œ ê·¸ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œì˜ this
- í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œí•  ê²½ìš°ì—ëŠ” thisê°€ ì§€ì •ë˜ì§€ ì•ŠëŠ”ë‹¤. thisì—ëŠ” í˜¸ì¶œí•œ ì£¼ì œì— ëŒ€í•œ ì •ë³´ê°€ ë‹´ê¸´ë‹¤.
- ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ í™œì„±í™”í•  ë‹¹ì‹œì— thisê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° thisëŠ” ì „ì—­ ê°ì²´ë¥¼ ë°”ë¼ë³¸ë‹¤.
- ë”°ë¼ì„œ í•¨ìˆ˜ì—ì„œì˜ thisëŠ” ì „ì—­ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
> ë”ê¸€ë¼ìŠ¤ í¬ë½í¬ë“œëŠ” ì´ë¥¼ ëª…ë°±í•œ ì„¤ê³„ìƒì˜ ì˜¤ë¥˜ë¼ê³  ì§€ì í•œë‹¤.

### í™”ì‚´í‘œ í•¨ìˆ˜
- ES6ì—ì„œëŠ” í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ thisê°€ ì „ì—­ê°ì²´ë¥¼ ë°”ë¼ë³´ëŠ” ë¬¸ì œë¥¼ ë³´ì™„í•˜ê³ ì, thisë¥¼ ë°”ì¸ë”©í•˜ì§€ ì•ŠëŠ” í™”ì‚´í‘œ í•¨ìˆ˜ë¥¼ ìƒˆë¡œ ë„ì…í–ˆë‹¤.
- í™”ì‚´í‘œ í•¨ìˆ˜ëŠ” ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ ìƒì„±í•  ë•Œ this ë°”ì¸ë”© ê³¼ì • ìì²´ê°€ ë¹ ì§€ê²Œ ë˜ì–´, ìƒìœ„ ìŠ¤ì½”í”„ì˜ thisë¥¼ ê·¸ëŒ€ë¡œ í™œìš©í•  ìˆ˜ ìˆë‹¤.

```js
var obj = {
  outer: function(){
    console.log(this);          // (1) { outer: f }
    var innerFunc = () => {
      console.log(this);        // (2) { outer: f }
    };
    innerFunc();
  }
}
obj.outer();
```

### ìƒì„±ì í•¨ìˆ˜ ë‚´ë¶€ì—ì„œì˜ this
- ìƒì„±ì í•¨ìˆ˜ë¡œ ìƒì„±ëœ ì¸ìŠ¤í„´ìŠ¤ë¥¼ thisë¡œ ë°”ì¸ë”© í•œë‹¤.

```js
var Cat = function(name, age){
  this.bark = 'ì´ë™';
  this.name = name;
  this.age = age;
}
var choco = new Cat('ì´ˆì½”', 7);
var nabi = new Cat('ë‚˜ë¹„', 5);
console.log(choco, nabi);

// Cat { bark: 'ì•¼ì˜¹', name: 'ì´ˆì½”', age: 7 }
// Cat { bark: 'ì•¼ì˜¹', name: 'ë‚˜ë¹„', age: 5 }
```

## ğŸ’¡ ì¸ì‚¬ì´íŠ¸
- ì–´ë–¤ í•¨ìˆ˜ë¥¼ ê°ì²´ì˜ í”„ë¡œí¼í‹°ì— í• ë‹¹í•œë‹¤ê³  í•´ì„œ ê·¸ ìì²´ë¡œì„œ ë¬´ì¡°ê±´ ë©”ì„œë“œê°€ ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ê°ì²´ì˜ ë©”ì„œë“œë¡œì„œ í˜¸ì¶œí•  ê²½ìš°ì—ë§Œ ë©”ì„œë“œë¡œ ë™ì‘í•˜ê³ , ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ í•¨ìˆ˜ë¡œ ë™ì‘í•œë‹¤.



```js
var func = function(x){
  console.log(this, x)
}

func(1); // Window { ... } 1
var obj = {
  method: func
};
obj.method(2); // { method: f } 2
```

- ë©”ì„œë“œëŠ” ë©”ì„œë“œë¡œì„œ í˜¸ì¶œí•œ ê°ì²´ë¥¼ thisë¡œ ë°”ì¸ë”©í•œë‹¤. ë©”ì„œë“œì˜ ë‚´ë¶€í•¨ìˆ˜ëŠ” ì—°ê´€ì´ì—†ë‹¤.

```js
var obj1 = {
  outer: function(){
    console.log(this);             // (1)
    var innerFunc = function(){
      console.log(this)            // (2)  (3)
    }
    innerFunc();

    var obj2 = {
      innerMethod: innerFunc
    };
    obj.innerMethod();
  }
};
obj1.outer();
```

- (1): `obj1`, (2):ì „ì—­ê°ì²´(window), (3): `obj2`
- (1)ì€ ë©”ì„œë“œë¡œì„œ í˜¸ì¶œ ë¨
- (2)ì€ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œ ë¨
- (3)ì€ ë©”ì„œë“œë¡œì„œ í˜¸ì¶œ ë¨
